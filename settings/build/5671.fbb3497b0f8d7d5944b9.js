"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[5671],{85671:function(t,s,c){c.r(s);var e=c(30270),i=c(12902),n=c(48399);const r=(0,e.Ue)(((t,s)=>({integrationsLoaded:!1,fetching:!1,services:[],plugins:[],scripts:[],placeholders:[],blockedScripts:[],setScript:(s,c)=>{t((0,i.ZP)((t=>{if("block_script"===c){let c=t.blockedScripts;if(s.urls){for(const[t,e]of Object.entries(s.urls)){if(!e||0===e.length)continue;let t=!1;for(const[s,i]of Object.entries(c))e===s&&(t=!0);t||(c[e]=e)}t.blockedScripts=c}}const e=t.scripts[c].findIndex((t=>t.id===s.id));-1!==e&&(t.scripts[c][e]=s)})))},fetchIntegrationsData:async()=>{if(s().fetching)return;t({fetching:!0});const{services:c,plugins:e,scripts:i,placeholders:n,blocked_scripts:r}=await p();let o=i;o.block_script&&o.block_script.length>0&&o.block_script.forEach(((t,s)=>{t.id=s})),o.add_script&&o.add_script.length>0&&o.add_script.forEach(((t,s)=>{t.id=s})),o.whitelist_script&&o.whitelist_script.length>0&&o.whitelist_script.forEach(((t,s)=>{t.id=s})),t((()=>({integrationsLoaded:!0,services:c,plugins:e,scripts:o,fetching:!1,placeholders:n,blockedScripts:r})))},addScript:c=>{t({fetching:!0}),s().scripts[c]||t((0,i.ZP)((t=>{t.scripts[c]=[]}))),t((0,i.ZP)((t=>{t.scripts[c].push({name:"general",id:t.scripts[c].length,enable:!0})})));let e=s().scripts;return n.doAction("update_scripts",{scripts:e}).then((s=>(t({fetching:!1}),s))).catch((t=>{console.error(t)}))},saveScript:(c,e)=>{t({fetching:!0}),s().scripts[e]||t((0,i.ZP)((t=>{t.scripts[e]=[]}))),t((0,i.ZP)((t=>{const s=t.scripts[e].findIndex((t=>t.id===c.id));-1!==s&&(t.scripts[e][s]=c)})));let r=s().scripts;return n.doAction("update_scripts",{scripts:r}).then((s=>(t({fetching:!1}),s))).catch((t=>{console.error(t)}))},deleteScript:(c,e)=>{t({fetching:!0}),s().scripts[e]||t((0,i.ZP)((t=>{t.scripts[e]=[]}))),t((0,i.ZP)((t=>{const s=t.scripts[e].findIndex((t=>t.id===c.id));-1!==s&&t.scripts[e].splice(s,1)})));let r=s().scripts;return n.doAction("update_scripts",{scripts:r}).then((s=>(t({fetching:!1}),s))).catch((t=>{console.error(t)}))},updatePluginStatus:async(s,c)=>{t({fetching:!0}),t((0,i.ZP)((t=>{const e=t.plugins.findIndex((t=>t.id===s));-1!==e&&(t.plugins[e].enabled=c)})));const e=await n.doAction("update_plugin_status",{plugin:s,enabled:c}).then((t=>t)).catch((t=>{console.error(t)}));return t({fetching:!1}),e},updatePlaceholderStatus:async(s,c,e)=>{t({fetching:!0}),e&&t((0,i.ZP)((t=>{const e=t.plugins.findIndex((t=>t.id===s));-1!==e&&(t.plugins[e].placeholder=c?"enabled":"disabled")})));const r=await n.doAction("update_placeholder_status",{id:s,enabled:c}).then((t=>t)).catch((t=>{console.error(t)}));return t({fetching:!1}),r}})));s.default=r;const p=()=>n.doAction("get_integrations_data",{}).then((t=>t)).catch((t=>{console.error(t)}))}}]);