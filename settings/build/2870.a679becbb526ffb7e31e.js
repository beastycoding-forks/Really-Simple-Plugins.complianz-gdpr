"use strict";(self.webpackChunkcomplianz_gdpr=self.webpackChunkcomplianz_gdpr||[]).push([[2870,5972],{72870:function(e,t,n){n.r(t);var r=n(69307),c=n(56293),l=n(5830),s=n(37839),a=n(75972);t.default=()=>{const e=(0,r.useRef)(null),{fields:t,updateField:n,getFieldValue:o,getField:i,setChangedField:p,changedFields:u,fetchFieldsData:f,fieldsLoaded:d}=(0,c.default)(),{setBannerContainerClass:m,bannerContainerClass:y,cssLoading:g,cssLoaded:z,generatePreviewCss:_,pageLinks:S,selectedBanner:v,selectedBannerId:b,tcfActiveServerside:h,fetchBannerData:k,setBannerDataLoaded:w,bannerDataLoaded:q,bannerHtml:E,manageConsentHtml:L,consentType:x}=(0,l.default)(),[P,A]=(0,r.useState)(null),[I,O]=(0,r.useState)(0),[T,C]=(0,r.useState)(!1),[F,H]=(0,r.useState)(!1),[M,D]=(0,r.useState)(!1),[B,W]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!d||!q)return;let e="tcf"===o("uses_ad_cookies_personalized")||"yes"===o("uses_ad_cookies_personalized");"no"===o("uses_ad_cookies")&&(e=!1),H(e),D(!0)}),[d,q,o("uses_ad_cookies_personalized")]),(0,r.useEffect)((()=>{q||k()}),[q]),(0,r.useEffect)((()=>{d||f()}),[d]),(0,r.useEffect)((()=>{M&&k()}),[F]),(0,r.useEffect)((()=>{M&&F!==h&&(async()=>{await k(),await f(),O(I+1)})()}),[F,h,v]),(0,r.useEffect)((()=>{M&&F!==h&&(async()=>{await k(),O(I+1),await f()})()}),[v]),(0,r.useEffect)((()=>{k()}),[o("a_b_testing_buttons")]),(0,s.Z)((()=>{J()})),(0,r.useEffect)((()=>{q&&(n("consent_type",x),p("consent_type",x))}),[x]),(0,r.useEffect)((()=>{n("consent_type",x)}),[x]),(0,r.useEffect)((()=>{V(),O(I+1)}),[u]),(0,r.useEffect)((()=>{b>0&&(R(),O(I+1))}),[b,x,q,F]),(0,r.useEffect)((()=>{b>0&&T&&Z()}),[I,b,F,T]);const R=()=>{let e=K();for(const t of e)if(v.hasOwnProperty(t.id)){let e=v[t.id];(0===e.length||e.hasOwnProperty("text")&&0===e.text.length)&&(e=t.default),n(t.id,e)}C(!0),n("manage_consent",v.revoke)},V=()=>{let e=K();for(const t of e)v.hasOwnProperty(t.id)&&(v[t.id]=t.value)},j=async()=>{clearTimeout(P);let e=K();if(B){const t=setTimeout((async()=>{await _(e)}),500);A(t)}else await _(e),W(!0)},Z=async()=>{await j(),"optin"===x&&Q()&&await j(),1==o("soft_cookiewall")&&(m("cmplz-soft-cookiewall"),setTimeout((function(){m("")}),4e3)),G(!0)};(0,r.useEffect)((()=>{if(!F)return;const t=e.current;if(e.current&&"optin"===x&&t){let e=i("tcf_purposes"),n=(0,a.filterArray)(e.options,e.value);const r=(0,a.getPurposes)("marketing",!1),c=(0,a.getPurposes)("statistics",!1),l=(0,a.filterArray)(n,r),s=(0,a.filterArray)(n,c);let o=i("tcf_features"),p=(0,a.filterArray)(o.options,o.value),u=i("tcf_specialFeatures"),f=(0,a.filterArray)(u.options,u.value),d=i("tcf_specialPurposes"),m=(0,a.filterArray)(d.options,d.value);const y=t.querySelector(".cmplz-tcf .cmplz-marketing .cmplz-description"),g=t.querySelector(".cmplz-tcf .cmplz-statistics .cmplz-description"),z=t.querySelector(".cmplz-tcf .cmplz-features .cmplz-description"),_=t.querySelector(".cmplz-tcf .cmplz-specialfeatures .cmplz-title"),S=t.querySelector(".cmplz-tcf .cmplz-specialpurposes .cmplz-title");let v=t.querySelector(".cmplz-tcf .cmplz-features"),b=t.querySelector(".cmplz-tcf .cmplz-specialpurposes"),h=t.querySelector(".cmplz-tcf .cmplz-specialfeatures"),k=t.querySelector(".cmplz-tcf .cmplz-statistics");0===p.length&&v&&(v.style.display="none"),0===m.length&&b&&(b.style.display="none"),0===f.length&&h&&(h.style.display="none"),0===s.length&&k&&(k.style.display="none"),y&&(y.innerHTML=(0,a.concatenateString)(l)),g&&(g.innerHTML=(0,a.concatenateString)(s)),z&&(z.innerHTML=(0,a.concatenateString)(p)),_&&(_.innerHTML=(0,a.concatenateString)(f)),S&&(S.innerHTML=(0,a.concatenateString)(m))}}),[F,I,q,x,g,t]);const N=(e,t,n)=>{let r=new RegExp(t,"g");return e.replace(r,n)},G=e=>{let t=document.querySelector(".cmplz-manage-consent"),n=document.querySelector("#cmplz-cookiebanner-container .cmplz-cookiebanner");t&&(t.style.display="none"),!F&&n&&e&&"optin"===x&&"view-preferences"===o("use_categories")&&(n.querySelector(".cmplz-view-preferences").style.display="block",n.querySelector(".cmplz-save-preferences").style.display="none"),document.addEventListener("click",(e=>{e.target.closest(".cmplz-manage-consent")&&(n&&n.style.removeProperty("display"),t&&(t.style.display="none")),(e.target.closest(".cmplz-close")||e.target.closest(".cmplz-accept")||e.target.closest(".cmplz-deny"))&&(n&&(n.style.display="none"),t&&(t.style.display="block")),n&&e.target.closest(".cmplz-view-preferences")&&(n.classList.add("cmplz-categories-visible"),n.querySelector(".cmplz-categories").style.display="block",n.querySelector(".cmplz-categories").classList.add("cmplz-fade-in"),n.querySelector(".cmplz-view-preferences").style.display="none",n.querySelector(".cmplz-save-preferences").style.display="block"),n&&e.target.closest(".cmplz-save-preferences")&&(n.classList.remove("cmplz-categories-visible"),n.querySelector(".cmplz-categories").style.display="none",n.querySelector(".cmplz-categories").classList.remove("cmplz-fade-in"),n.querySelector(".cmplz-view-preferences").style.display="block",n.querySelector(".cmplz-save-preferences").style.display="none")}))},J=()=>{let e=document.querySelector("#cmplz-cookiebanner-container");e&&e.querySelectorAll(".cmplz-links a:not(.cmplz-external), .cmplz-buttons a:not(.cmplz-external)").forEach((e=>{e.classList.add("cmplz-hidden");for(let n in S)S.hasOwnProperty(n)&&e.classList.contains(n)&&(e.setAttribute("href",S[n].url+e.getAttribute("data-relative_url")),"{title}"===e.innerText&&(e.innerText=(t=S[n].title,(new DOMParser).parseFromString(t,"text/html").documentElement.textContent)),e.classList.remove("cmplz-hidden"));var t})),G(!1)},K=()=>t.filter((e=>"banner"===e.data_target)),Q=()=>{if("bottom"===o("position"))return!1;if(F)return!1;if(!0===o("disable_width_correction"))return!1;if(!document.querySelector(".cmplz-categories"))return;document.querySelector(".cmplz-categories").style.display="block";let e=document.querySelector(".cmplz-categories").offsetWidth;document.querySelector(".cmplz-categories").style.display="none";let t=document.querySelector(".cmplz-message").offsetWidth,r=document.querySelector(".cmplz-cookiebanner").offsetWidth,c=1.3*r,l=0,s=0,a=!1,i=window.getComputedStyle(document.querySelector(".cmplz-cookiebanner"),null).getPropertyValue("padding-left"),p=window.getComputedStyle(document.querySelector(".cmplz-cookiebanner"),null).getPropertyValue("padding-left");if(-1!==i.indexOf("px")&&-1!==p.indexOf("px")&&(a=parseInt(i.replace("px",""))+parseInt(p.replace("px",""))),e>0&&a&&r-a>e){let t=r-42-e;l=parseInt(r)+parseInt(t)}let u=0;if(u=document.querySelectorAll(".cmplz-buttons .cmplz-btn").offsetWidth,u>t){let e=u-42-t;s=parseInt(u)+parseInt(e)}let f=0;return f=s>l?s:l,f>r&&f<c&&(f%2!=0&&f++,n("banner_width",f),!0)},U=e=>{let t={use_logo:"logo",category_all:"category_marketing",category_stats:"category_statistics",category_prefs:"category_preferences",accept_informational:"accept_optout",accept:"accept_optin",view_preferences:"manage_options",save_preferences:"save_settings"};return t.hasOwnProperty(e)?t[e]:e};if(!q)return(0,r.createElement)(r.Fragment,null);let X=E,Y=L,$=K();X=N(X,"{consent_type}",x),X=N(X,"{id}",v.ID),X=N(X,"{vendor_count}","optin"===x?643:""),Y=N(Y,"{id}",v.ID);let ee=1==o("hide_preview")||1==o("disable_cookiebanner");for(const e of $){if("title"===e.id)continue;let t=U(e.id);if(v.hasOwnProperty(e.id)){let n=v[e.id];X="text_checkbox"===e.type&&n&&n.hasOwnProperty("text")?N(X,"{"+t+"}",n.text):"banner_logo"===e.type?N(X,"{"+t+"}",v.logo_options[n]?v.logo_options[n]:""):N(X,"{"+t+"}",n)}"revoke"===e.id&&(Y=N(Y,"{manage_consent}",v.revoke))}return!z||ee?(0,r.createElement)(r.Fragment,null):(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{id:"cmplz-preview-banner-container",ref:e},(0,r.createElement)("div",{id:"cmplz-cookiebanner-container",className:y,dangerouslySetInnerHTML:{__html:X}}),(0,r.createElement)("div",{id:"cmplz-manage-consent","data-nosnippet":"true",dangerouslySetInnerHTML:{__html:Y}})))}},75972:function(e,t,n){n.r(t),n.d(t,{concatenateString:function(){return l},filterArray:function(){return c},getPurposes:function(){return r}});const r=(e,t)=>"functional"===e||"preferences"===e?[]:"marketing"===e?t?[1,2,3,4,5,6,7,8,9,10]:[1,2,3,4,5,6,10]:"statistics"===e?[1,7,8,9]:void 0,c=(e,t)=>{e||(e={}),Array.isArray(t)||(t=Object.keys(e));const n=t.map((e=>parseInt(e)));return Object.keys(e).filter((e=>n.includes(parseInt(e)))).map((t=>e[t]))},l=e=>{let t="";const n=e.length-1;for(var r in e)e.hasOwnProperty(r)&&(t+=e[r],t+=r<n?", ":".");return t}},37839:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(99196),c=function(e,t){var n,c=(n=(0,r.useRef)(!0)).current?(n.current=!1,!0):n.current;(0,r.useEffect)((function(){if(!c)return e()}),t)}}}]);